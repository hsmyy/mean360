<section class="container" ng-controller="EvaluationController">
	<div id="wrapper" class="row-fluid">
		<div class="col-md-2">
			<nav class="nav-docs" role="complementary">
				<div class="span3 " style="width: auto;">
					<ul class="nav">
						<li class="active"><a id="started-group"
							href="#getting-started-overview" prevent-default=""
							sscroll-to="getting-started-overview">目录</a>
							<ul class="nav">
								<li class=""><a href="#getting-started-overview"
									prevent-default="" data-title="Overview">正在进行的评估</a></li>
							</ul></li>
					</ul>
				</div>
			</nav>
		</div>
	</div>
	<div class="col-md-10 col-md-offset-2">
		<div>
			<h3>2014年度360反馈：评估</h3>
		</div>
		<hr class="sectionBreak" />
		<div ng-show="phase == 0">

			<div>
				<ul class="list-inline">
					<li>待评价者：<span class="badge">{{candidates.length}}</span>人<br></li>
					<li>评价问题：<span class="badge">{{questions.length}}</span>道<br></li>
					<li>预计时间：<span class="badge">{{candidates.length * questions.length * 2}}</span>分钟<br></li>
				</ul>
			</div>
			<div class="guide">
				<div class="row">
                    <div class="col-md-6 col-sm-6" data-ng-repeat="candidate in candidates" ng-click="startEval(candidate)" style="cursor:pointer;">
                        <div class="card">
                        	<div class="pull-left photo">
                                <img src="{{candidate.img}}" />
                            </div>
                            <div class="pull-left">
                                <div>姓名：{{candidate.name}}</div>
                                <div data-ng-if="candidate.position.length > 0">职位：{{candidate.position}}</div>
                                <div data-ng-if="candidate.department.length > 0">部门：{{candidate.department}}</div>
                            </div>
                            <div class="pull-right">
                                <button ng-click="delCandidate($index)"
                                        class="close">&times;</button>
                            </div>
                            <div class="badge evaluation-status" ng-if="candidate.status=='NEW'">未评估</div>
                            <div class="badge badge-info evaluation-status" ng-if="candidate.status=='PROGRESS'">进行中(3/4)</div>
                            <div class="badge badge-success evaluation-status" ng-if="candidate.status=='NEW'">已完成</div>
                        </div>
                    </div>
				</div>
			</div>
		</div>

		<div ng-show="phase == 1">
            <div class="row">
                <div class="col-md-4">
                    <b>被评价者: </b>{{evaluatingCandidate.name}}
                </div>
                <div class="col-md-4">
                    <b>职位: </b>{{evaluatingCandidate.position}}
                </div>
                <div class="col-md-4">
                    <b>部门: </b>{{evaluatingCandidate.department}}
                </div>
            </div>
            <hr class="sectionBreak">
            <div>
                <h4 class="section-title">行动计划总结</h4>
                <table class="table table-strip">
                    <thead>
                    <tr>
                        <td>计划名称</td>
                        <td>完成度</td>
                        <td>完成满意度</td>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="act in candidates[currentPerson].actionplan">
                        <td>{{act.name}}</td>
                        <td><rating ng-model="act.progress" max="5"></rating></td>
                        <td><rating ng-model="act.satisfy" max="5"></rating></td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <hr class="sectionBreak" />
            <div>
                <h4 class="section-title">评估问题</h4>
                <div ng-repeat="question in questions" class="row evaluation-question">
                    <div class="col-md-1 question-index">{{$index+1}}</div>
                    <div class="col-md-8 question-content"><b>[{{question.category}}]</b> {{question.question}}</div>
                    <div class="col-md-3 question-score"><rating ng-model="evaluatingCandidate.scores[$index]" max="5"></rating></div>
                </div>
            </div>
            <hr class="sectionBreak" />
            <div style="text-align: center;" class="btn-toolbar">
                <button type="button" class="btn btn-primary" ng-click="finishEvaluation(evaluatingCandidate)">完成</button>
                <button type="button" class="btn btn-default">临时保存</button>
            </div>
        </div>
		<div ng-show="phase == 2">
			<div>您已经完成了评估！</div>
		</div>
	</div>
    <div growl></div>
</section>
